<!DOCTYPE html>
<html>
<head>
  <title>K-Means Clustering Results</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
  <h2 class="text-center mb-4">ðŸ“Š K-Means Clustering Results</h2>

  <p><b>Total samples:</b> {{ n_samples }}</p>
  <p><b>Optimal K (from Elbow):</b> {{ opt_k }}</p>

  <h4>Elbow Plot</h4>
  <img src="data:image/png;base64,{{ elbow_png }}" class="img-fluid mb-3">

  <h4>Cluster Visualization</h4>
  <img src="data:image/png;base64,{{ cluster_png }}" class="img-fluid mb-3">

  <h4>Silhouette Scores</h4>
  <ul>
    {% for k, v in sil_scores.items() %}
      <li>K = {{k}} â†’ Score = {{ "%.3f"|format(v) }}</li>
    {% endfor %}
  </ul>

  <h4>Cluster vs Prolog Old Slab</h4>
    <table class="table table-bordered text-center">
    <thead class="table-light">
        <tr><th>Cluster</th><th>Bracket Counts (Old Regime)</th></tr>
    </thead>
    <tbody>
    {% for c, mapping in contingency.items() %}
        <tr>
        <td>{{ c }}</td>
        <td>
            {% for b, count in mapping.items() %}
            {{ b }} â†’ {{ count }}<br>
            {% endfor %}
        </td>
        </tr>
    {% endfor %}
    </tbody>
    </table>

  <a href="/" class="btn btn-primary">Back to Home</a>
</body>
</html>
